<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>STRIPPED &amp; TURNED UP</title>

  <link rel="stylesheet" href="styles.css?v=24" />

  <!-- Hide header ONLY on Sessions screen -->
  <style>
    body[data-screen="sessions"] header.top { display: none !important; }
  </style>

  <!-- Crash overlay (only shows if something breaks) -->
  <script>
    (function () {
      const show = (msg) => {
        let box = document.getElementById("kdCrash");
        if (!box) {
          box = document.createElement("div");
          box.id = "kdCrash";
          box.style.cssText = `
            position:fixed; left:12px; right:12px; top:12px; z-index:999999;
            border:2px solid #ff4d4d; border-radius:14px; padding:12px 14px;
            background:rgba(10,10,14,.92); color:#fff; font:14px/1.35 system-ui, -apple-system, Segoe UI, Roboto, Arial;
            box-shadow:0 12px 40px rgba(0,0,0,.45);
            white-space:pre-wrap;
          `;
          document.addEventListener("DOMContentLoaded", () => document.body.appendChild(box));
        }
        box.textContent = "JS CRASH DETECTED:\n\n" + msg;
      };

      window.addEventListener("error", (e) => {
        show((e && (e.message || (e.error && e.error.stack))) || String(e));
      });

      window.addEventListener("unhandledrejection", (e) => {
        const reason = e && e.reason ? (e.reason.stack || e.reason.message || String(e.reason)) : "Unknown rejection";
        show(reason);
      });
    })();
  </script>
</head>

<body data-screen="landing">
  <!-- HEADER (shows on landing, hidden on sessions by CSS above) -->
  <header class="top" id="topBar">
    <div class="brand">
      <div class="brandMark" aria-hidden="true"></div>
      <div class="brandText">
        <div class="titleRow">
          <div class="title">STRIPPED <span class="amp">&amp;</span> TURNED UP</div>
          <div class="liveBadge"><span class="liveDot"></span> LIVE</div>
        </div>
        <div class="sub">
          <span class="subStrong">Acoustic &amp; Stripped Performances</span>
          <span class="subSep">•</span>
          <span id="tagline">Stripped down. Turned up.</span>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap" id="app">

    <!-- ✅ LANDING PAGE -->
    <section id="landing" style="
      border-radius: 18px;
      padding: 18px 16px;
      margin-bottom: 14px;
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
    ">
      <div style="font-size: 18px; font-weight: 800; letter-spacing: .2px; margin-bottom: 6px;">
        Welcome to STRIPPED &amp; TURNED UP
      </div>

      <div style="opacity:.85; line-height:1.45; margin-bottom: 14px;">
        Full sessions + acoustic queues. Tap once to unlock audio, then let it ride.
      </div>

      <div style="display:flex; gap:10px; flex-wrap: wrap; align-items:center;">
        <button id="enterBtn" type="button" style="
          appearance:none;
          border: 1px solid rgba(255,255,255,.18);
          background: rgba(255,255,255,.10);
          color: inherit;
          padding: 12px 14px;
          border-radius: 14px;
          font-weight: 800;
          letter-spacing: .2px;
          cursor: pointer;
          box-shadow: 0 10px 30px rgba(0,0,0,.25);
        ">
          Enter Sessions
        </button>

        <button id="aboutBtn" type="button" style="
          appearance:none;
          border: 1px solid rgba(255,255,255,.12);
          background: rgba(0,0,0,.12);
          color: inherit;
          padding: 12px 14px;
          border-radius: 14px;
          font-weight: 700;
          cursor: pointer;
        ">
          What is this?
        </button>
      </div>

      <div id="aboutBox" style="
        display:none;
        margin-top: 14px;
        padding: 12px 12px;
        border-radius: 14px;
        background: rgba(0,0,0,.18);
        border: 1px solid rgba(255,255,255,.10);
        line-height: 1.5;
        opacity: .92;
      ">
        One clean stream per artist. Queues auto-advance when available.
      </div>
    </section>

    <!-- ✅ SESSIONS SCREEN (hidden until Enter) -->
    <section id="sessionsScreen" style="display:none;">
      <section id="playerWrap"></section>

      <section id="sessionsList">
        <div class="sessionsHead">
          <div>
            <div class="sessionsTitle">Sessions</div>
            <div class="sessionsSub">Tap a session once to unlock audio. Queues will auto-advance.</div>
          </div>
          <div id="status">Loading…</div>
        </div>

        <div id="episodes"></div>
      </section>
    </section>
  </main>

  <script src="data/episodes.js?v=24"></script>

  <!-- REQUIRED for autoplay + queue advance -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    (function () {
      const landing = document.getElementById("landing");
      const sessions = document.getElementById("sessionsScreen");
      const enterBtn = document.getElementById("enterBtn");
      const aboutBtn = document.getElementById("aboutBtn");
      const aboutBox = document.getElementById("aboutBox");

      function enterSessions() {
        document.body.setAttribute("data-screen", "sessions");
        if (landing) landing.style.display = "none";
        if (sessions) sessions.style.display = "block";

        // Tell app.js the user intentionally entered (helps autoplay rules)
        window.__STU_ENTERED__ = true;

        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      if (enterBtn) enterBtn.addEventListener("click", enterSessions);

      if (aboutBtn) aboutBtn.addEventListener("click", function () {
        if (!aboutBox) return;
        aboutBox.style.display = aboutBox.style.display === "none" ? "block" : "none";
      });

      // Optional direct link to sessions
      const params = new URLSearchParams(location.search);
      if (params.get("start") === "1") enterSessions();
    })();
  </script>

  <script src="app.js?v=24" defer></script>
</body>
</html>
